<!DOCTYPE html>
<html>
  <head>
    <% include ../static/partials/head.ejs %>
  </head>
  <body>

    <% include ../static/partials/navbar.ejs %>

    <main class="container">

      <% include ../static/partials/messages.ejs %>


      <h3><%= `${user.name}'s Profile` %></h3>
      <hr>
      <div>
        <h5><%= user.role %> </h5>
        <div>
            <p>Upgrade</p>

            <% if(user.role === 'premium') { %>
            <div>
                    <button
                    class="btn btn-md"
                    data-toggle="modal"
                    data-target="#confirmDowngrade"
                >
                Downgrade
                </button>

                    <div
                    class="modal fade"
                    id="confirmDowngrade"
                    tabindex="-1"
                    role="dialog"
                    aria-labelledby="exampleModalCenterTitle"
                    aria-hidden="true"
                  >
                    <div class="modal-dialog modal-dialog-centered" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                          >
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                                <form style="display:initial" action="/users/<%= user.id %>/downgrade" method="post">
                                    <button type="submit" class="btn btn-danger">OK</button>
                                </form>
                        </div>
                      </div>
                    </div>
                  </div>
            </div>
            <% } %>
            <% if(user.role === 'standard') { %>
                <div>
                    <form action='/users/<%= user.id %>/upgrade' method='post'>
                        <% include ./partials/upgrade.ejs %>
                        <input type='hidden' name='chargeAmount' value='1500'>
                    </form>
                </div>
            <% } %>
        </div>
      </div>
      <div>
            <h5>Latest Wikis</h5>
            <ul class="list-unstyled">
              <% if(wikis) { %>
                <% wikis.forEach((wiki) => { %>
                  <li>
                    <a href="/wikis/<%= wiki.id %>">
                      <%= wiki.title %>
                    </a>
                  </li>
                <% }) %>
              <% } %>
            </ul>
      </div>
      <div>
          <h5>Collaborations</h5>
      </div>
 
      <hr>

    <% include ../static/partials/baseScripts.ejs %>

  </body>
</html>